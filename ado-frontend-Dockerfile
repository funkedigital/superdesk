FROM node:12-alpine AS builder

WORKDIR /client/

# requirements
RUN apk add --no-cache git \
 && npm i -g npm grunt-cli

# install client
COPY ./client /client/
RUN npm install \
 && grunt build

FROM nginx:alpine
COPY --from=builder /client/dist/ /usr/share/nginx/html/
RUN chown -R nginx:www-data /usr/share/nginx/html/
