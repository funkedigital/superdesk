replicaCount: 1
proto: https
stage: stage
appEnv: dev
appDebug: 1
timezone: Europe/Berlin

elasticsearchPublisher:
  name: elasticsearch
  component: elasticsearch
  image: elasticsearch
  tag: 5.6
  serviceName: elasticsearch

elasticsearchSuperdesk:
  name: elastic-deployment
  component: elastic
  image: elasticsearch
  tag: 2
  serviceName: elastic

memcached:
  name: memcached-deployment
  component: memcached
  image: memcached
  tag: latest
  serviceName: memcached

mongodb:
  name: mongodb-deployment
  component: mongodb
  image: mongo
  tag: 3.4
  serviceName: mongodb
  pvcSize: 100Gi

nginx:
  name: nginx-deployment
  component: nginx
  image: harbor.cloud.funkedigital.de/superdesk/stage/nginx
  tag: latest
  serviceName: publisher

postgres:
  name: postgres
  component: postgres
  image: postgres
  tag: latest
  serviceName: postgres
  pvcSize: 50Gi

publisher:
  name: php
  component: php
  image: harbor.cloud.funkedigital.de/superdesk/stage/php
  tag: latest
  serviceName: php
  superdeskHost: "superdesk-stage.cloud.funkedigital.de"
  pvcSize: 1Ti

rabbitmq:
  name: rabbitmq-deployment
  component: rabbitmq
  image: rabbitmq
  tag: management
  serviceName: rabbitmq

redis:
  name: redis-deployment
  component: redis
  image: redis
  tag: 5.0
  serviceName: redis

superdesk:
  name: superdesk-deployment
  component: web
  image: harbor.cloud.funkedigital.de/superdesk/stage/superdesk
  tag: latest
  serviceName: superdesk-service-ip
  baseUrl: "superdesk-stage.cloud.funkedigital.de"
  pvcSize: 1Ti

supervisor:
  name: supervisor-deployment
  component: supervisor
  image: harbor.cloud.funkedigital.de/superdesk/stage/supervisor
  tag: latest
  serviceName: supervisor

service:
  type: ClusterIP

resources:
  limits:
    cpu: 7
    memory: 13Gi
  requests:
    cpu: 7
    memory: 13Gi

ingress:
  enabled: true
  annotations:
    kubernetes.io/ingress.class: nginx
    kubernetes.io/tls-acme: "true"
    nginx.ingress.kubernetes.io/use-regex: "true"
    nginx.ingress.kubernetes.io/body-size: "1024m"
    nginx.ingress.kubernetes.io/proxy-body-size: "1024m"
    nginx.org/client-max-body-size: "1024m"
  hosts:
    - host: superdesk-stage.cloud.funkedigital.de
      paths:
        - path: /
          backend:
            serviceName: superdesk-service-ip
            servicePort: 80
        - path: /api
          backend:
            serviceName: superdesk-service-ip
            servicePort: 5000
        - path: /contentapi
          backend:
            serviceName: superdesk-service-ip
            servicePort: 5400
        - path: /ws
          backend:
            serviceName: superdesk-service-ip
            servicePort: 5100
    - host: publisher-stage.cloud.funkedigital.de
      paths:
        - path: /
          backend:
            serviceName: publisher
            servicePort: 80
        - path: /ws
          backend:
            serviceName: supervisor
            servicePort: 8080
    - host: stage.wmn.de
      paths:
        - path: /
          backend:
            serviceName: publisher
            servicePort: 80
  tls:
    - hosts:
        - stage.wmn.de
      secretName: stage.wmn.de.tls
    - hosts:
        - superdesk-stage.cloud.funkedigital.de
      secretName: superdesk-stage.tls
    - hosts:
        - publisher-stage.cloud.funkedigital.de
      secretName: publisher-stage.tls

